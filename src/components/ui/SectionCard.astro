---
// src/components/ui/SectionCard.astro
interface Props {
  title?: string;
  subtitle?: string;
  id?: string;
  class?: string;
  collapsible?: boolean;
}

const { title, subtitle, id, class: className, collapsible = false } = Astro.props;

import BaseCard from './BaseCard.astro';
---

<BaseCard
    id={id}
    variant="white"
    padding="md"
    radius="lg"
    class:list={[
        "section-card w-full transition-all duration-300",
        className,
        { 'section-card-collapsible': collapsible }
    ]}
    data-collapsible={collapsible ? "true" : undefined}
>
    <div class="flex flex-col gap-4 lg:gap-8 lg:p-4">
        {(title || Astro.slots.has('title') || subtitle || Astro.slots.has('actions')) && (
            <div class:list={[
                "flex items-center gap-4 section-card-header",
                { 'cursor-pointer': collapsible }
            ]}>
                <div class="flex-1 flex flex-col gap-1">
                    {Astro.slots.has('title') ? (
                        <h3 class="heading-3"><slot name="title" /></h3>
                    ) : (
                        title && <h3 class="heading-3">{title}</h3>
                    )}
                    {subtitle && <p class="text-body text-muted">{subtitle}</p>}
                </div>

                <slot name="actions" />

                {collapsible && (
                    <i
                        data-lucide="chevron-down"
                        class="w-5 h-5 text-azure-400 transition-transform duration-300 lg:hidden section-card-icon pointer-events-none"
                    ></i>
                )}
            </div>
        )}

        <div class:list={[
            "section-card-content flex flex-col gap-4 lg:gap-8",
            { 'hidden lg:block': collapsible }
        ]}>
            <slot />
        </div>
    </div>
</BaseCard>

